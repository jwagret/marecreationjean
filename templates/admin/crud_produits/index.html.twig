{% extends 'admin/admin/admin.html.twig' %}

{% block messageLien %}
	<a href="{{ path('app_admin_crud_produits_liste') }}">
		Raffraichir la page</a>
{% endblock %}

{% block admin_section_main_2 %}
	<div class="crud_lien">
		<a href="{{ path('app_admin_crud_produits_ajout_produit') }}">
			<i class="fa-solid fa-plus-square fa-3x"></i>
		</a>
	</div>
	<div class="table-responsive w-75 mt-2">
		<table class="table">
			<caption>Nombre de Produits : {{ total_produits }}</caption>
			<thead>
				<tr>
					<th scope="col">Image</th>
					<th scope="col">Nom</th>
					<th scope="col">Référence</th>
					<th scope="col">Désignation</th>
					<th scope="col">Prix</th>
					<th scope="col">Stock</th>
					<th scope="col">Carrousel</th>
					<th scope="col">Créé le</th>
					<th scope="col">Modifier le</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% if liste_produits == [] %}
					<tr>
						<td colspan="9" class="fw-bold text-danger">AUCUN PRODUITS</td>
					</tr>
				{% endif %}
				{% for produit in liste_produits %}
					<tr>
						{% if produit.images.empty %}
							<td style="width: 10%">
								<div style="display: contents">
									<img width="100%" src="{{ asset('/images/produits/im-0.png' ) }}" alt="aucune image">
								</div>
							</td>
						{% endif %}
						{% for image in produit.images%}
							{% if loop.first %} {# si l'index est le 1er #}
								<td style="width: 10%">
									<div style="display: contents">
										<img width="100%" src="{{ asset('/images/produits/'~image.imageChemin ) }}" alt="{{ image.imageNom }}">
									</div>
								</td>
							{% endif %}
						{% endfor %}
						<td>{{produit.ProduitNom}}</td>
						<td>{{produit.ProduitReference}}</td>
						<td>{{produit.ProduitDesignation}}</td>
						<td>{{produit.ProduitPrix  | number_format(2, ',', '.')}}€</td>
						<td></td>
						<td></td>
						<td>{{produit.dateCreation | date("d/m/Y") }}</td>
						{% if produit.dateModification != null %}
							<td>{{produit.dateModification | date("d/m/Y") }}</td>
						{% else %}
							<td></td>
						{% endif %}
						<td>
							<a href="{{path('app_admin_crud_produits_details', {'id': produit.id})}}">
								<i class="fa-solid fa-eye"></i>
							</a>
							<a href="{{path('app_admin_crud_produits_modifier_produit', {'id': produit.id})}}">
								<i class="fa-solid fa-arrow-rotate-back"></i>
							</a>
							<a href="{{path('app_admin_crud_produits_supprimer_produit', {'id': produit.id} )}}">
								<i class="fa-solid fa-trash"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

{% endblock %}

{% block admin_section_main_2_2 %}


{% endblock %}
